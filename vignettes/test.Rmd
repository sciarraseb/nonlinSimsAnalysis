---
shorttitle        : "Measurement timing"
format          : "pandoc"
header-includes:
  - \usepackage{nccmath}
  - \usepackage{caption}
  - \usepackage{textcomp} #for copyright symbol on title page
  - \usepackage{longtable}
  - \usepackage{setspace}
  - \usepackage{booktabs}
  - \usepackage{array}
  - \usepackage{multirow}
  - \usepackage{wrapfig}
  - \usepackage{colortbl}
  - \usepackage{pdflscape}
  - \usepackage{tabu}
  - \usepackage{threeparttable}
  - \usepackage{threeparttablex}
  - \usepackage[normalem]{ulem}
  - \usepackage{makecell}
  - \usepackage{xcolor}
  - \usepackage{amsthm} 
  - \usepackage{amsmath} ##needed for argmax
  - \DeclareMathOperator*{\argmax}{arg\,max}
  - \usepackage{setspace} #needed to doublespace caption text (using \doublespacing)
  - \usepackage[labelfont = {bf, up}]{caption} 
  - \newcommand{\blandscape}{\begin{landscape}}
  - \newcommand{\elandscape}{\end{landscape}}
  - \usepackage{upgreek}  #required for non-italicized Greek letters
  - \usepackage{subcaption}
  - \captionsetup[figure]{labelfont={normalfont, bf}, singlelinecheck=false, labelsep=newline}
  - \DeclareCaptionJustification{double}{\DoubleSpacing}
  - \DeclareCaptionFont{figCaptionFont}{\fontfamily{phv}} #sets caption font to sans serif font of Helvetica 
  - \DeclareCaptionFont{figCaptionSize}{\footnotesize} #set caption font size to footnote 
  - \DeclareCaptionFont{figCaptionStyle}{\textup}  #set caption font to non-italicized font  
  - \DeclareCaptionLabelSeparator{captionSep}{\newline\newline} #separates figure label and figure title with required white space
  - \captionsetup[figure]{labelfont={figCaptionStyle, bf}, font = {figCaptionFont,figCaptionSize, figCaptionStyle}, labelsep = captionSep, justification=raggedright}
  - \captionsetup[table]{font = {figCaptionFont,figCaptionSize,figCaptionStyle}, labelfont={bf}, labelsep=captionSep, justification = raggedright, margin = {0cm,0cm}}
  - \newenvironment{helvenv}{\fontfamily{phv}\selectfont}{}
  - \raggedbottom #ensures text starts from top of page and any white space is at the botom

#environment numbering 
  - \setcounter{section}{0} 
  - \makeatletter \renewcommand\thesection{} \renewcommand\thesubsection{\@arabic\c@section.\@arabic\c@subsection} \makeatother
  
  - \newtheorem{theorem}{Theorem}
  - \newtheorem{example}[theorem]{Example}
  
  #modifies heading levels of 4-5 to follow apa7
  - |
    \makeatletter
    \renewcommand{\paragraph}{\@startsection{paragraph}{4}{\parindent}%
      {0\baselineskip \@plus 0.2ex \@minus 0.2ex}%
      {-1em}%
      {\normalfont\normalsize\bfseries\typesectitle}}
    
    \renewcommand{\subparagraph}[1]{\@startsection{subparagraph}{5}{1em}%
      {0\baselineskip \@plus 0.2ex \@minus 0.2ex}%
      {-\z@\relax}%
      {\normalfont\normalsize\bfseries\itshape\hspace{\parindent}{#1}\textit{\addperi}}{\relax}}
    \makeatother

  
author: 
  - name          : "Sebastian Sciarra "
    affiliation   : "1"
    corresponding : yes    
    email         : "ssciarra@uoguelph.ca"
affiliation: 
  - id            : "1"
    institution   : "University of Guelph"
keywords          : "measurement timing, nonlinear "
wordcount         : "5554 words"
floatsintext      : yes
linkcolor         : blue
figsintext        : yes 
figurelist        : no
tablelist         : no
footnotelist      : no
numbersections    : yes
linenumbers       : yes
mask              : no
draft             : no
documentclass     : "apa7"
csl               : "`r system.file('rmd', 'apa7.csl', package = 'papaja')`"
classoption       : "man"
output            : papaja::apa6_pdf
editor_options: 
  markdown: 
    wrap: 72
bibliography: dissertation_references.bib
---

```{r package_loading, include=F}
#load packages
library(easypackages)
packages <- c('devtools','tidyverse', 'RColorBrewer', 'parallel', 'data.table', 'kableExtra', 'ggtext', 'egg', 'nonlinSims','papaja', 
              'ggbrace', 'cowplot')
libraries(packages)
load_all()
```

```{r knitting_setup, echo=F, message = F, warning = F}
#import raw data files (needed for computing variances)
exp_1_raw <-convert_raw_var_to_sd(raw_data = read_csv('Data/exp_1A.csv')) %>%
  mutate_at(.vars = c("number_measurements", "measurement_spacing", "midpoint"), factor)
  
exp_2_raw <-convert_raw_var_to_sd(raw_data = read_csv('Data/exp_2.csv')) %>%
  mutate_at(.vars = c("number_measurements", "measurement_spacing", "sample_size"), factor)

exp_3_raw <-convert_raw_var_to_sd(raw_data = read_csv('Data/exp_3.csv')) %>%
  mutate_at(.vars = c("number_measurements", "time_structuredness", "sample_size"), factor)

#unfiltered data 
param_summary_exp_1 <- readRDS(file = 'data/uf_param_summary_exp_1.RData')
param_summary_exp_2 <- readRDS(file = 'data/uf_param_summary_exp_2.RData')
param_summary_exp_3 <- readRDS(file = 'data/uf_param_summary_exp_3.RData')

#create analytical versions of summary data 
exp_1_analytical <- generate_likert_days_data_sets(summary_data = param_summary_exp_1, exp_num = 1)
exp_2_analytical <- generate_likert_days_data_sets(summary_data = param_summary_exp_2, exp_num = 2)
exp_3_analytical <- generate_likert_days_data_sets(summary_data = param_summary_exp_3, exp_num = 3)

#create condition summary data sets 
cond_summary_exp_1 <- compute_condition_summary(param_summary_data = param_summary_exp_1, facet_var = 'measurement_spacing', 
                          ind_vars = c('number_measurements', 'measurement_spacing', 'midpoint'))
cond_summary_exp_2 <- compute_condition_summary(param_summary_data = param_summary_exp_2, facet_var = 'measurement_spacing', 
                  ind_vars = c('number_measurements', 'measurement_spacing', 'sample_size'))
cond_summary_exp_3 <- compute_condition_summary(param_summary_data = param_summary_exp_3, facet_var = 'time_structuredness', 
                          ind_vars = c('number_measurements', 'sample_size', 'time_structuredness'))
```

```{r ergodicity, include=F, eval=F}
num_people <- 100 
num_occasions <- 100

data_set_1 <- matrix(data = list('ID' = NA, 
           'occasion' = NA), 
           nrow = num_people, ncol = num_occasions) 

data_set_2 <- matrix(data = list('ID' = NA, 
           'occasion' = NA), 
           nrow = num_people, ncol = num_occasions) 

for (person in 1:num_people) {
  
  #homogeneity = same mean and SD across all people 
  #stationarity = constant mean and variance over time 
  data_set_1[person, ] <- rnorm(n = num_occasions, mean = runif(n = 1, min = 5, max = 50), 
                              sd = runif(n = 1, min = 2, max = 5))
}

for (person in 1:num_people) {
  
  #homogeneity = same mean and SD across all people 
  #stationarity = constant mean and variance over time 
  data_set_2[person, ] <- rnorm(n = num_occasions, mean = runif(n = 1, min = 5, max = 50), 
                              sd = runif(n = 1, min = 2, max = 5))
}

mode(data_set_1) <- 'numeric'
data_df <- as.data.frame(x = data_set_1)

mode(data_set_2) <- 'numeric'
data2_df <- as.data.frame(x = data_set_2)

var(rowMeans(data_df))
var(colMeans(data_df))

##BETWEEN PERSON VARIANCE
mean_value <- mean(colMeans(data_df)) 
between_var <- sum((rowMeans(data_df) - mean_value)^2)/100

##WITHIN PERSON VARIANCE
within_var <- mean(apply(X = data_df, MARGIN = 1, FUN = var)) #person 

##total_variance
total_var <- var(unlist(data_df))



within_cors <- rep(NA, times = num_people)

#compute correlations within people 
for(person in 1:num_people) {
  
  within_cors[person] <- cor(as.numeric(data_df[person, ]), as.numeric(data2_df[person, ]))
}

between_cors <- rep(NA, times = num_people)

#compute correlations between people 
for(occasion in 1:num_occasions) {
  
  between_cors[occasion] <- cor(as.numeric(data_df[ ,occasion]), as.numeric(data2_df[ ,occasion]))
}

sd(within_cors)
sd(between_cors)

mean(within_cors)
mean(between_cors)

mean(rowMeans(data_df))
mean(colMeans(data_df[sample(x = 1:100, size = 60, replace = F), ]))

sqrt(mean(apply(X = data_df, MARGIN = 2, FUN = var))) #variable sds
sqrt(mean(apply(X = data_df, MARGIN = 1, FUN = var))) #person sds
```

Consider a situation where a project manager has to lead a team to
complete a project by a deadline. To succeed, certain psychological
states of the team and each team member such as motivation, stress, and
expectations must be managed. To manage psychological states, the
manager has to understand what behaviours to engage in---whether through
words and/or actions---and how to execute them in order to elicit the
desired psychological effects. Perhaps most important, the manager must
also understand when to engage in a certain behaviour and how the
execution of the behaviour depends on the situation. For example, ...
Therefore, the issue of time cannot be overlooked.

The topic of time has certainly received a considerable amount of
attention in organizational psychology over the past 20 years. Examples
of well-received articles published around the beginning of the 21^st^
century have discussed how investigating time is important for
understanding patterns of change and boundary conditions of theory
[@zaheer1999], how longitudinal research is necessary for disentangling
different types of causality  [@mitchell2001], and explicated a pattern
of organizational change [or institutionalization\; @lawrence2001].
Since then, articles have emphasized the need to address time in
specific areas such as performance [@fisher2008; @dalal2014], teams [@roe2012], and goal setting [@fried2004] and, more generally, throughout organizational research [@george2000; @roe2008;@ployhart2010; @sonnentag2012; @navarro2015; @shipp2015; @kunisch2017; @vantilborgh2018; @aguinis2021].

(ref:maxwell2007) @maxwell2007
(ref:roe2014) @roe2014

Despite the considerable emphasis that had been placed on investigating
processes over time, the prevalence of longitudinal research remained
low. One study examined the prevalence of longitudinal research from
1970--2006 in five organizational psychology journals and found that 4%
of articles used longitudinal designs (Roe, 2014). Another survey of
two applied psychology journals in 2005 found that 9.5% (10 of 105
studies) of studies used longitudinal designs  [@roe2008]. Similarly,
another survey of studies employing mediation analysis found that,
across five journals in 2005, only 9.7% (7 of 72 studies) studies used
longitudinal designs [@maxwell2007].\footnote{Note that the definition
of a longitudinal design in (ref:maxwell2007) required that measurements
be taken over at least three time points so that measurements of the
predictor, mediator, and outcome variables were separated over time.}

The low prevalence of longitudinal research in organizational is surprising given its role, whether implicit or explicit, in theory. [Paragraph emphasizes the recognition that strong theory addresses time and that most theory specifies processes that occur over time]. 

## A review of ergodicity 

One reason of particular interest that may explain the paucity of longitudinal research is the assumption that cross-sectional findings
yield the same conclusions as longitudinal findings [for more discussion, see @curran2011; @wang2015]. Unfortunately, ergodic theory tells us that equating the results of cross-sectional and
longitudinal findings can only be done under highly restrictive conditions [for a technical review of ergodic theory, see @petersen1983]. To
understand the relevance of ergodic theory when comparing analyses of cross-sectional and longitudinal data, consider an example where a
researcher obtains data from a 100 people measured over 100 time points. For the didactic purposes, all data are assumed to be sampled from a
normal distribution. In the data set, each row contains a $p$ person's data over the 100 time points and each column contains data from 100
people at a $t$ time point. Thus, there are 100 longitudinal data sets that contain the data of one person across all 100 time points and 100
cross-sectional data sets that contain the data of 100 people at a given time point. To understand whether findings in any given
cross-sectional data set yield the same findings in any given longitudinal data set, the researcher randomly samples one cross-sectional and
one longitudinal data set and computes the mean and variance in each set. For the sampled cross-sectional data set, the researcher computes a
mean ($\mu_t$) using Equation \ref{eq:cross-mean} shown below,

\begin{align}
\mu_t = \frac{1}{P}\sum^P_{p = 1} x_p,
(\#eq:cross-mean)
\end{align}

\noindent where the scores of all $P$ people are summed ($x_p$) and then divided by the number of people ($P$), and a variance using Equation \ref{eq:cross-variance} shown below,

\begin{align}
\sigma_t = \frac{1}{P}\sum^P_{p = 1} (x_p - {X}_t)^2,
(\#eq:cross-variance)
\end{align}

\noindent where the sum of squared differences between each person's score ($x_p$) and the average value at the given $t$ time point (${X}_t)$) is computed and then divided by the number of people ($P$). For the sampled longitudinal data set, the researcher also computes a mean ($\mu_t$), but uses Equation \ref{eq:long-mean} shown below,

\begin{align}
\mu_p = \frac{1}{T}\sum^T_{t = 1} x_t,
(\#eq:long-mean)
\end{align}

\noindent where the scores at each $t$ time point are summed ($x_t$) and then divided by the number of time points ($T$), and computes a variance, but uses using Equation \ref{eq:long-variance} shown below,

\begin{align}
\sigma_p = \frac{1}{T}\sum^T_{t = 1} (x_t - {X}_p)^2,
(\#eq:long-variance)
\end{align}

\noindent where the sum of squared differences between the score at each time point ($x_t$) and the average value of the $p$ person's scores (${X}_p)$) is computed and then divided by the number of time points ($T$). 

If the researcher wants use the cross-sectional mean and variance ($\mu_t$ and $\sigma_t$, respectively) interchangeably with the longitudinal mean and variance ($\mu_p$ and $\sigma_p$, respectively), then two conditions outlined by ergodic theory must be satisfied [@molenaar2004; @molenaar2009]. First, a given cross-sectional mean and variance can only closely estimate the mean and variance of any given person's data to the extent that each person's data are generated from a normal distribution with the same mean and variance. When each person's data are generated from the same normal distribution, the condition of **homogeneity** is met. Importantly, satisfying the condition of homogeneity does not guarantee that the mean and variance obtained from another cross-sectional data set will closely estimate the mean and variance of any given person. The mean and variance values computed in from any given cross-sectional data set can only closely estimate the values of any given person to the extent that the cross-sectional mean and variance remain constant over time. If the mean and variance of observations remain constant over time, then the the second condition of **stationarity** is satisfied. Therefore, the researcher can only treat cross-sectional and longitudinal means and variances interchangeably if each person's data is generated from the same normal distribution (homogeneity) and if the mean and variance remain constant over time (stationarity). When the conditions of homogeneity and stationarity are satisfied, a process is said to be **ergodic**: Analyses of cross-sectional data sets return the same values as analyses on longitudinal data sets.

Given that psychological studies almost never collect data from only one person, one potential reservation may be that the conditions required for ergodicity only hold when a
longitudinal data set contains the data of one person. That is, if the researcher used the full data set containing the data of 100 people sampled over 100 time points and
computed 100 cross-sectional means and variances (Equation \ref{eq:cross-mean} and Equation \ref{eq:cross-variance}, respectively) and 100 longitudinal means and variances
(Equation \ref{eq:long-mean} and Equation \ref{eq:long-variance}, respectively), wouldn't the average of the cross-sectional means and variances be the same as the average of the
longitudinal means and variances? Although the average longitudinal mean returns the same value as the average of the cross-sectional means, the average longitudinal variance
remains different from the average cross-sectional variance (for an example, see [Appendix D][Appendix D: Understanding ergodicity with code]). **Emphasize that variability is central to any form of analysis (correlation, regression, SEM , factor analysis), and so, if variability in cross-sectional data differs from variability in longitudinal data, then any form of analysis will return different results when applied on each data set.** The non-equivalence of the average
longitudinal variance and cross-sectional variances that results from a non-ergodic process, thus, explains why discussions of ergodicity often comment that "for non-ergodic
processes, an analysis of the structure of IEV [interindividual variability] will yield results that differ from results obtained in an analogous analysis of IAV [intraindividual variability]"[@molenaar2004, p. 202]. \footnote{It is important to note that ergodicity be conceptualized on a continuum}

With an understanding of the conditions required for ergodicity, a brief consideration of research in organizational psychology finds that these conditions are regularly violated. Focusing only on homogeneity (each person's data are generated from the same distribution), several instances in organizational research violate this condition. As examples of homogeneity violations, employees show different patterns of absenteeism over five years [@magee2016], leadership development over the course of a seminar [@day2011], career stress over the course of 10 years [@igic2017], and job performance in response to organizational restructuring [@miraglia2015]. With respect to stationarity (constant )

Given the violations of homogeneity and stationarity, it is unsurprising that an increasing number investigations into ergodicity in organizational research---and psychology as a whole---find psychological processes to be non-ergodic. 

If non-ergodic processes characterize the norm in organizational psychology, then an understanding of temporal dynamics can only be obtained by conducting longitudinal research. 

## Difficulties of conducting longitudinal research 

## Review of research that has 


# References

```{=tex}
\begingroup
\setlength{\parindent}{-0.5in}
\setlength{\leftskip}{0.5in}
```
::: {#refs custom-style="Bibliography"}
:::

```{=tex}
\endgroup
```
